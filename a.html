<html>
    <body>
        Test
        <script>
            var socket;
            var fn = function() {
                socket = new WebSocket('ws://127.0.0.1:8888/ws');

                socket.addEventListener('open', function (event) {
                    socket.send('Hello Server!');
                });

                socket.addEventListener('message', function (event) {
                    console.log('Message from server ', event.data);
                });

                socket.addEventListener('error', function(event) {
                    try {
                        fn();
                        console.log("Reconnected...");
                    } catch(e) {
                        alert(e);
                    }
                });

                socket.addEventListener('close', function(event) {
                    try {
                        fn();
                        console.log("Close and reconnected...");
                    } catch(e) {
                        alert(e);
                    }
                });
            }
            fn();

        </script>
    </body>
</html>